
---

# 第1章 クリーンアーキテクチャ

クリーンアーキテクチャは、主に **4つの層** に分けられます。

1. **ドメインモデル（Entity層）**
    人が何と言おうと「事実」である部分を示す。
    → アプリケーションの中心となるビジネスルールや概念を表す層。
    （例：ユーザー、注文、商品などのドメインオブジェクト）

2. **ユースケース（Use Case層）**
    「人が何をしたいか」を示す部分。
    → ドメインモデルを使って実現したい操作やビジネスフローを定義する層。
    （例：注文を作成する、支払いを処理する、レポートを生成する など）

3. **インターフェースアダプター（Interface Adapter層）**
    アプリケーションの「枠組み作り」に関する部分。
    → 内部のユースケースと外部の入出力（Web API、DB、UIなど）を橋渡しする層。
    （例：コントローラ、プレゼンター、リポジトリの実装など）

4. **インフラストラクチャー（Infrastructure層）**
    下支えとしての動作の実態を示す。
    → 外部の技術的要素（DB接続、API通信、フレームワーク依存部分など）を扱う層。
    ここはアプリケーションの土台となるが、ビジネスルールとは切り離される。


---

### 💡補足

- 各層は**内側ほど抽象的で普遍的**、外側ほど**具体的で変化しやすい**構造を持ちます。

- 依存関係は**内側に向かう**ように設計される（＝外側の層が内側の層に依存し、逆はない）。

- 目的は「変更に強く、再利用しやすい」構成を実現することです。


---

# 第2章 パッケージ原則

## パッケージ設計の基本的な考え方

利用しやすいパッケージ設計とは、**小さい機能ごとに分けられている設計**である。アプリケーションは責務・責任で分けるべきである。

> **重要な考え方**
> 分かれすぎていて難しいというよりも、一つの箱の中にいろんなものが入りすぎて切り出すのが難しい方が後から辛くなってしまう。

## パッケージ原則の6つの概念

1. **再利用リリース等価の原則**（REP: Reuse Release Equivalency Principle）
2. **全再利用の原則**（CRP: Common Reuse Principle）
3. **閉鎖性共通の原則**（CCP: Common Closure Principle）
4. **非循環依存関係の原則**（ADP: Acyclic Dependencies Principle）
5. **安定依存の原則**（SDP: Stable Dependencies Principle）
6. **安定度・抽象度等価の原則**（SAP: Stable Abstractions Principle）

### 1. 再利用リリース等価の原則（REP）
できるだけプログラムの共通する部分を再利用できるようにしましょうという方針のこと。

### 2. 全再利用の原則（CRP）
パッケージ利用者に「ここは必要だけど、ここは採用したくない」といった取捨選択の権限がないこと。すべて利用するしかないという制約。

### 3. 閉鎖性共通の原則（CCP）
一つの変更が必要なときに、できる限り**一つのパッケージだけを交換すれば済む形**にしなさいという原則。

### 4. 非循環依存関係の原則（ADP）
パッケージの依存が循環してはならないというシンプルな原則。依存関係の循環は避けるべき。

### 5. 安定依存の原則（SDP）
パッケージの依存は常に**安定したパッケージに向く**という真理を語っている原則。

### 6. 安定度・抽象度等価の原則（SAP）
パッケージの**安定度と抽象度には相関関係がある**ということを説明している原則。

---

# 第3章 オブジェクト指向

## オブジェクト指向の前提

まず前提として**オブジェクト指向には明確な定義がない**。

どんどん肥大化してしまうプログラミングの難しさを、単に物のイメージで優しくできないかという試みを、業界はオブジェクト指向と呼んでいただけである。

## オブジェクト指向の3つの基本概念

### 1. カプセル化（Encapsulation）
相互に関連性の高い知識群を**一つのオブジェクトの中に閉じ込める**のがカプセル化です。

### 2. 多様性（Polymorphism）
一言で言えば、**プラグインのこと**。
本体側から見るとどれも同じに見えるが、実は中身の違う数多くの実体があるということ。

### 3. 継承/汎化（Inheritance/Generalization）
**共通の性質や機能を持つオブジェクト同士の関係性**を表現する仕組み。

- **継承**：親クラスの性質や機能を子クラスが受け継ぐこと
  - 例：「動物」クラスから「犬」「猫」クラスが継承
- **汎化**：複数のクラスから共通部分を抽出して、より一般的な概念（親クラス）を作ること
  - 例：「犬」「猫」の共通点から「動物」という概念を抽出

> **注意点**
> 継承は「is-a関係」（〜は〜である）が成り立つ場合にのみ使用すべき。
> 単なるコード再利用が目的なら、継承よりも委譲やコンポジションを検討する。

## 💡補足：コードの再利用について

コードを再利用したいだけであれば、継承などは使用せずに、他の関数やオブジェクトのメソッドに移動すれば良いです。
